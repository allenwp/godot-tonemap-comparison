# Godot Tonemap Comparison
Tonemap comparison between Godot and Blender.

# Usage
1) Browse the [sdr_renders](https://github.com/allenwp/godot-tonemap-comparison/tree/main/sdr_renders) folder to find the tonemap renders that you are intersted in. Tap the "View raw" or "Raw" link on the `.webp` file. [Example](https://github.com/allenwp/godot-tonemap-comparison/blob/main/sdr_renders/godot/Max1Saturation100/godot_Linear_w1.0_Max1Saturation100.webp).
2) Open multiple of these raw file links in your web browser and tab back and forth to see the differences.
3) Alternatively, you can download the raw files and use an image comparison tool, such as a "difference" blend mode in an image editor or an online tool like [Diffchecker](https://www.diffchecker.com/image-compare/) or [ImageTools.org](https://www.imagetools.org/compare).

# Example Comparison of Blender and Godot

(coming soon)

# Generating SDR Renders in Godot

Simply run the main scene in the Godot project to generate SDR renders. A markdown table will also be ouptut in the log with links to the images in this repo.

## Adding an HDR Texture
HDR textures should be **2048x2048**. You can change this by changing the project window's viewport size.
- Add the texture to the `textures` array of the root `Node3D` in `unshaded-texture.tscn`.

## Adding a Tonemapper
- Edit `image_saver.gd` and add the new tonemapper to the `tonemappers` dictionary.
- The dictionary key is the tonemapper
- If the "blender" element of the array is empty, it will not be included in the generated markdown table.

# Generating SDR Renders in Blender

The [Blender scene](https://github.com/allenwp/godot-tonemap-comparison/blob/main/blender/blender-tonemap.blend) is set up to allow easy saving of SDR renders using the Compositing feature. The scene is set up to render to **2048x2048**, matching the Godot project.

1) Open the [Blender scene](https://github.com/allenwp/godot-tonemap-comparison/blob/main/blender/blender-tonemap.blend).
2) Go to the "Compositing" tab.
3) Set the texture path to be your desired HDR texture.
4) Choose Render - Render Image (F12)
5) Choose Image - Save (Alt S)
6) Change "Color Managment" on the right side to "Override"
7) Choose the View (tonemap) and Look
8) Save your iamge as a .webp

# Why `webp` instead of `png`
`png` files generated by Godot's [save_png](https://docs.godotengine.org/en/stable/classes/class_image.html#class-image-method-save-png) function do not render correctly in Firefox because Firefox will use an incorrect colour profile instead of sRGB. This does not happen with `webp`, so uncompressed `webp` files have been used instead.
